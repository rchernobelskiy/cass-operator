# Packaging for Operator Hub

Shamelessly pulled from the [documentation](https://sdk.operatorframework.io/docs/olm-integration/generating-a-csv/).

## Known Issues

Currently the OperatorHub.io website generates a slightly different version of the `spec.customresourcedefinitions.owned[]` field compared to `operator-sdk` (v0.17.0). The one generated by the SDK is missing some information.

You should to use the [Package Builder](https://operatorhub.io/packages) to assist in generating complete files.

## Create CSV (no previous version)

Generate Cluster Service Version (CSV)

```bash
operator-sdk generate csv --make-manifests=false --csv-version a.b.c
```

**Example:**

```bash
operator-sdk generate csv --operator-name cass-operator --csv-version 1.0.0 --make-manifests=false
```

Update files under `operator/deploy/olm-catalog/cass-operator/a.b.c`

## Update CSV

_Useful when adding a CRD to a project_

Run the generate command again and new CRDs will be added to the CSV

```bash
operator-sdk generate csv --make-manifests=false --csv-version a.b.c
```

**Example:**

```bash
operator-sdk generate csv --operator-name cass-operator --csv-version 1.0.0 --make-manifests=false
```

## Upgrade CSV

Run the generate command and specify the old version to base on

```bash
operator-sdk generate csv --make-manifests=false --csv-version d.e.f --from-version a.b.c
```

**Example:**

```bash
operator-sdk generate csv --operator-name cass-operator --csv-version 1.1.0 --make-manifests=false --from-version 1.0.0
```
